/* Modern TrustMed AI Theme - Base Styles */

/* Import Nunito Sans font - MUST be first */
@import url('https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@200;300;400;500;600;700;800;900&display=swap');


/* Modern CSS Variables */
:root {
  --radius: 0.5rem;
  --font-sans: 'Nunito Sans', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-mono: 'Nunito Sans', 'Fira Code', 'Monaco', 'Courier New', monospace;

  /* TrustMed Pink Palette */
  --tm-bg: #fff8fa;
  --tm-grid: #ffe3ea;
  --tm-card: rgba(255, 247, 249, 0.92);
  --tm-primary: #ff6f7d;
  --tm-primary-dark: #e04c61;
  --tm-primary-light: #ff9aa8;
  --tm-text-dark: #572127;
  --tm-text-muted: #9b5c64;
}

/* Global Typography - Force Nunito Sans everywhere */
*,
html,
body,
#root,
.cl-root,
.cl-chat,
.cl-chat *,
[class*="Mui"],
[class*="prose"],
p,
div,
span,
h1, h2, h3, h4, h5, h6,
button,
input,
textarea {
  font-family: 'Nunito Sans', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Body and root background with pattern */
html,
body,
#root,
.cl-root,
.cl-chat,
.cl-chat > * {
  background-color: var(--tm-bg) !important;
  background-image:
    linear-gradient(135deg, rgba(255, 255, 255, 0.65) 0%, rgba(255, 240, 244, 0.8) 35%, rgba(255, 226, 235, 0.85) 100%),
    linear-gradient(0deg, rgba(255, 255, 255, 0.35), rgba(255, 255, 255, 0.35)),
    repeating-linear-gradient(0deg, transparent, transparent 38px, var(--tm-grid) 38px, var(--tm-grid) 39px),
    repeating-linear-gradient(90deg, transparent, transparent 38px, var(--tm-grid) 38px, var(--tm-grid) 39px);
  min-height: 100vh !important;
}

body,
.cl-root,
.cl-chat,
.message,
.welcome-screen {
  font-family: var(--font-sans);
  font-feature-settings: "rlig" 1, "calt" 1;
  line-height: 1.6;
  color: var(--tm-text-dark);
}

/* CORE FIX: Make all layout components transparent */
main,
[class*="MuiBox-root"],
[class*="MuiPaper-root"],
[class*="MuiContainer-root"],
[class*="chat-container"],
[class*="conversation-container"],
[class*="main-container"] {
    background: transparent !important;
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
}

/* Smooth transitions */
* {
  transition: background-color 0.2s cubic-bezier(0.4, 0, 0.2, 1),
              color 0.2s cubic-bezier(0.4, 0, 0.2, 1),
              border-color 0.2s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Animation for new messages */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(8px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.message {
  animation: slideIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Focus states for accessibility */
*:focus-visible {
  outline: 2px solid var(--tm-primary);
  outline-offset: 2px;
}

/* Selection color */
::selection {
  background: rgba(255, 111, 125, 0.25);
  color: var(--tm-text-dark);
}


/* Glass Effect for User Message Bubble - Same style as message-composer */
/* UNIVERSAL SELECTOR - targets ANY div with bg-accent that has user message classes */
div.bg-accent[class*="px-5"][class*="py-2"],
div[class*="bg-accent"][class*="px-5"][class*="py-2"],
div.bg-accent[class*="rounded-3xl"][class*="max-w"],
.message[data-author="user"] div.bg-accent,
.message[data-author="user"] > div.bg-accent,
.message[data-author="user"] .bg-accent,
[data-author="user"] div.bg-accent,
[data-author="user"] > div.bg-accent,
[data-author="user"] .bg-accent {
  --filter-glass3d: blur(16px) brightness(0.7) saturate(1.2) !important;
  background: rgba(255, 226, 235, 0.85) !important;
  border: 1px solid rgba(255, 168, 186, 0.6) !important;
  backdrop-filter: var(--filter-glass3d) !important;
  -webkit-backdrop-filter: var(--filter-glass3d) !important;
  box-shadow: 0 4px 10px -2px rgba(255, 111, 125, 0.25) !important;
}

/* Text color for user message - dark text to match light background */
.message[data-author="user"] .prose,
.message[data-author="user"] .prose * {
    color: var(--tm-text-dark) !important;
    --tw-prose-body: var(--tm-text-dark) !important;
    --tw-prose-headings: var(--tm-text-dark) !important;
    --tw-prose-lead: var(--tm-text-dark) !important;
    --tw-prose-links: var(--tm-text-dark) !important;
    --tw-prose-bold: var(--tm-text-dark) !important;
    --tw-prose-counters: var(--tm-text-dark) !important;
    --tw-prose-bullets: var(--tm-text-dark) !important;
    --tw-prose-hr: var(--tm-text-dark) !important;
    --tw-prose-quotes: var(--tm-text-dark) !important;
    --tw-prose-quote-borders: var(--tm-text-dark) !important;
    --tw-prose-captions: var(--tm-text-dark) !important;
    --tw-prose-code: var(--tm-text-dark) !important;
    --tw-prose-pre-code: var(--tm-text-dark) !important;
    --tw-prose-pre-bg: transparent !important;
    --tw-prose-th-borders: var(--tm-text-dark) !important;
    --tw-prose-td-borders: var(--tm-text-dark) !important;
}

/* Glass Effect for Assistant Message Bubble */
.message[data-author="assistant"] > div.bg-accent,
.message[data-author="TrustMed AI"] > div.bg-accent,
.welcome-screen > .prose {
  --filter-glass3d: blur(16px) brightness(1.2) saturate(1.1);
  background: rgba(255, 247, 249, 0.9) !important;
  border: 1px solid rgba(255, 211, 221, 0.9) !important;
  backdrop-filter: var(--filter-glass3d) !important; /* Fixed typo */
  -webkit-backdrop-filter: var(--filter-glass3d) !important; /* Fixed typo */
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);

  /* --- ðŸ’¡ ADDED FIXES FROM THE DELETED RULE --- */
  padding: 0 !important;
  margin: 0 !important;
  overflow: visible !important;
  max-height: none !important;
}

/* Fix logo - use actual/native size, no spacing or borders */
.message img,
.welcome-screen img,
.prose img,
[class*="prose"] img,
img[alt*="logo"],
img[alt*="TrustMed"],
img[src*="logo.png"] {
  width: auto !important;
  max-width: 100% !important;
  height: auto !important;
  max-height: none !important;
  min-height: auto !important;
  display: block !important;
  margin: 0 auto 1rem auto !important;
  padding: 0 !important;
  border: none !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  background: transparent !important;
  overflow: visible !important;
  object-fit: contain !important;
  clip: unset !important;
  clip-path: none !important;
}

/* Remove ALL spacing around logo containers */
.prose img,
[class*="prose"] img {
  margin-top: 0 !important;
  margin-bottom: 1rem !important;
}

/* Remove background and padding from welcome screen prose container */
/* .welcome-screen > .prose,
.welcome-screen .prose,
.message[data-author="TrustMed AI"] .prose,
.message[data-author="assistant"] .prose:first-child,
.message[data-author="TrustMed AI"] > div,
.message[data-author="TrustMed AI"] div.bg-accent,
.message[data-author="TrustMed AI"] > div > div,
.message[data-author="TrustMed AI"] div[class*="bg-"] {
  background: transparent !important;
  padding: 0 !important;
  margin: 0 !important;
  overflow: visible !important;
} */

/* Remove ALL padding/margin from paragraph containing logo */
.prose > p:first-child,
[class*="prose"] > p:first-child,
.prose p:has(img),
[class*="prose"] p:has(img),
.prose p:first-of-type,
[class*="prose"] p:first-of-type {
  margin: 0 !important;
  padding: 0 !important;
  background: transparent !important;
  border: none !important;
  width: 100% !important;
  text-align: center !important;
  overflow: visible !important;
}

/* Make all containers around logo images fully transparent */
.prose p:has(img) *,
[class*="prose"] p:has(img) *,
.message[data-author="TrustMed AI"] p:has(img),
.message[data-author="assistant"] p:has(img),
.message[data-author="TrustMed AI"] p:first-child,
.message[data-author="assistant"] p:first-child {
  background: transparent !important;
}

/* Ensure the message container background is transparent where logo appears */
.message[data-author="TrustMed AI"] > div:has(p:has(img)),
.message[data-author="assistant"] > div:has(p:has(img)),
.message[data-author="TrustMed AI"] > div:first-child,
.message[data-author="TrustMed AI"] > div > div:first-child,
.message[data-author="TrustMed AI"] > div:first-child > div:first-child,
.message[data-author="TrustMed AI"] .prose:first-child,
.message[data-author="TrustMed AI"] .prose:first-child > p:first-child {
  background: transparent !important;
  background-color: transparent !important;
  overflow: visible !important;
  max-height: none !important;
  clip: unset !important;
  clip-path: none !important;
}

/* Ensure message containers don't clip images */
.message[data-author="TrustMed AI"],
.message[data-author="assistant"] {
  overflow: visible !important;
}

/* Ensure prose and image containers don't clip */
.message[data-author="TrustMed AI"] .prose,
.message[data-author="assistant"] .prose,
.message[data-author="TrustMed AI"] .prose *,
.message[data-author="assistant"] .prose *,
.message[data-author="TrustMed AI"] > div,
.message[data-author="assistant"] > div,
.message[data-author="TrustMed AI"] > div > div,
.message[data-author="assistant"] > div > div {
  overflow: visible !important;
  max-height: none !important;
}

/* Text color for assistant message */
.message[data-author="assistant"] .prose,
.message[data-author="assistant"] .prose *,
.message[data-author="TrustMed AI"] .prose,
.message[data-author="TrustMed AI"] .prose *,
.welcome-screen .prose,
.welcome-screen .prose * {
    color: #1a202c !important;
    --tw-prose-body: #1a202c !important;
    --tw-prose-headings: #1a202c !important;
    --tw-prose-lead: #1a202c !important;
    --tw-prose-links: #1a202c !important;
    --tw-prose-bold: #1a202c !important;
    --tw-prose-counters: #1a202c !important;
    --tw-prose-bullets: #1a202c !important;
    --tw-prose-hr: #1a202c !important;
    --tw-prose-quotes: #1a202c !important;
    --tw-prose-quote-borders: #1a202c !important;
    --tw-prose-captions: #1a202c !important;
    --tw-prose-code: #1a202c !important;
    --tw-prose-pre-code: #1a202c !important;
    --tw-prose-pre-bg: transparent !important;
    --tw-prose-th-borders: #1a202c !important;
    --tw-prose-td-borders: #1a202c !important;
}

/* Glass Effect for Message Composer / Input Box */
#message-composer.bg-accent {
  --filter-glass3d: blur(16px) brightness(0.7) saturate(1.2);
  background: rgba(255, 226, 235, 0.85) !important;
  border: 1px solid rgba(255, 168, 186, 0.6) !important;
  backdrop-filter: var(--filter-glass3d) !important;
  -webkit-backdrop-filter: var(--filter-glass3d) !important;
  box-shadow: 0 4px 10px -2px rgba(255, 111, 125, 0.25);
}

/* Textarea style inside the glass composer */
#chat-input {
    color: var(--tm-text-dark) !important;
}

#chat-input::placeholder {
    color: var(--tm-text-muted) !important;
}

/* Style for the submit button */
#chat-submit {
    background-color: var(--tm-primary) !important;
    color: #fff !important;
}

#chat-submit:hover {
    background-color: var(--tm-primary-dark) !important;
}
